<!DOCTYPE html>
<html lang="en">
  <meta charset="utf-8" />
  <title>Calendar: Canvas</title>
  <style>
    :root {
      font-family: system-ui, sans-serif;
      font-size: calc(max(100%, min(2vw, 150%)));
      line-height: 1.5;
      color: white;
      background: color-mix(in srgb, crimson 4%, black);
    }
    body {
      margin: 1lh;
    }
    calendar-canvas {
      max-width: min-content;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;

      &:hover {
        box-shadow: 0 0 1px 1px blue;
      }
    }
  </style>
  <script type="module">
    const fontBase = "1em system-ui";
    const fontItalic = `italic ${fontBase}`;

    class CalendarCanvas extends HTMLElement {
      connectedCallback() {
        const d = this.ownerDocument;
        const w = d.defaultView || window;

        const lh = parseFloat(w.getComputedStyle(this).lineHeight);
        const dpr = w.devicePixelRatio;

        const canvas = d.createElement("canvas");
        this.append(canvas);

        const c = canvas.getContext("2d");
        let ch = 16;
        {
          c.font = fontBase;
          ch = c.measureText("0").width;

          canvas.width = 36 * ch * dpr;
          canvas.height = 6 * lh * dpr;
          if (dpr > 1) {
            canvas.style.width = 36 * ch + "px";
            canvas.style.height = 6 * lh + "px";
          }
        }

        c.textAlign = "center";
        c.textBaseline = "middle";

        c.scale(dpr, dpr);

        c.font = fontItalic;
        c.fillStyle = "crimson";
        c.fillText("Mon", 3 * ch, 0.5 * lh);
        c.fillText("Tue", 8 * ch, 0.5 * lh);
        c.fillText("Wed", 13 * ch, 0.5 * lh);
        c.fillText("Thu", 18 * ch, 0.5 * lh);
        c.fillText("Fri", 23 * ch, 0.5 * lh);
        c.fillText("Sat", 28 * ch, 0.5 * lh);
        c.fillText("Sun", 33 * ch, 0.5 * lh);
        c.strokeStyle = "crimson";
        c.beginPath();
        c.moveTo(0, lh);
        c.lineTo(100_000_000, lh);
        c.stroke();
        c.moveTo(0, 2 * lh);
        c.lineTo(100_000_000, 2 * lh);
        c.stroke();
        c.moveTo(0, 3 * lh);
        c.lineTo(100_000_000, 3 * lh);
        c.stroke();
        c.moveTo(0, 4 * lh);
        c.lineTo(100_000_000, 4 * lh);
        c.stroke();
        c.moveTo(0, 5 * lh);
        c.lineTo(100_000_000, 5 * lh);
        c.stroke();

        c.font = fontBase;
        c.fillStyle = "white";
        for (let day = 1; day <= 31; day++) {
          c.fillText(
            `${day}`,
            (3 + 5 * ((day - 1) % 7)) * ch,
            (1.5 + Math.floor((day - 1) / 7)) * lh
          );
        }
      }
    }
    customElements.define("calendar-canvas", CalendarCanvas);
  </script>
  <body>
    <calendar-canvas></calendar-canvas>
  </body>
</html>
